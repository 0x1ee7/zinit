# fpath+=( `pwd`/doc )
# autoload test-id-as
# test-id-as
#
# Introduction of id-as (an ice-mod that allows to nickname
# any snippet or plugin) is a set of so many changes that
# more tests were needed, thus this file was created, real
# tests would took too long.

autoload colors; colors

cd /var/tmp
print; print -- "$fg[green]..........Working dir: $PWD$reset_color.........."

print -- "Removing test-plugins & snippets from disk ..."

command rm -rf -- ~/.zplugin/plugins/mvdan---sh/ \
                    ~/.zplugin/plugins/oz---safe-paste \
                    ~/.zplugin/plugins/junegunn---fzf-bin \
                    ~/.zplugin/plugins/my---jun---gun \
                    ~/.zplugin/plugins/myid \
                    ~/.zplugin/plugins/myid---sub---1 \
                    ~/.zplugin/plugins/my---pure

command rm -rf -- ~/.zplugin/snippets/https--github.com--robbyrussell--oh-my-zsh--trunk--plugins \
                    ~/.zplugin/snippets/MY-UNIQUE \
                    ~/.zplugin/snippets/my \
                    ~/.zplugin/snippets/myid--sub

print -- "Done."

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`github-$fg_bold[magenta]binary$fg_no_bold[red]'< $fg[magenta]mvdan$reset_color/$fg[yellow]sh$fg_bold[red] without$fg_no_bold[red] id-as nickname$reset_color"
zplugin ice from"gh-r" as"command" mv"shfmt* -> shfmt"; zplugin load mvdan/sh
zplugin cd mvdan/sh; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`single-file plugin' $fg[magenta]oz$reset_color/$fg[yellow]safe-paste$fg_bold[red] without$fg_no_bold[red] id-as nickname$reset_color"
zplugin load oz/safe-paste
zplugin cd oz/safe-paste; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`github-$fg_bold[magenta]binary$fg_no_bold[red]'< $fg[magenta]junegunn$reset_color/$fg[yellow]fzf-bin$fg_bold[red] without$fg_no_bold[red] id-as nickname$reset_color"
zplugin ice from"gh-r" as"command" mv"fzf* -> fzf1" atpull'!rm -f fzf2; touch fzf.txt'; zplugin light junegunn/fzf-bin
zplugin cd junegunn/fzf-bin; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`github-$fg_bold[magenta]binary$fg_no_bold[red]'< $fg[magenta]junegunn$reset_color/$fg[yellow]fzf-bin$fg_bold[green] AS ::\`$fg[red]my/jun/gun$fg_bold[green]'::$reset_color"
zplugin ice from"gh-r" as"command" mv"fzf* -> fzf2" id-as"my/jun/gun"; zplugin load junegunn/fzf-bin
zplugin cd my/jun/gun; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`theme'< $fg[magenta]agkozak$reset_color/$fg[yellow]agkozak-zsh-theme$fg_bold[green] AS ::\`$fg[red]myid$fg_bold[green]'::$reset_color"
zplugin ice id-as"myid"; zplugin load agkozak/agkozak-zsh-theme
zplugin cd myid; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]Unloading $fg[red]::\`myid'::$fg[green] (agkozak/agkozak-zsh-theme)$reset_color"
zplugin unload myid > /tmp/myid.unload.txt
head -n 10 /tmp/myid.unload.txt

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`theme'< $fg[magenta]agkozak$reset_color/$fg[yellow]agkozak-zsh-theme$fg_bold[green] AS ::\`$fg[red]myid/sub/1$fg_bold[green]'::$reset_color"
zplugin ice id-as"myid/sub/1"; zplugin load agkozak/agkozak-zsh-theme
zplugin cd myid/sub/1; ls -lthd .*(N) *(N)

sleep 5

print -- "$green[green]Report of $fg[red]::\`myid/sub/1'::$fg[green] (agkozak/agkozak-zsh-theme)$reset_color"
zplugin report myid/sub/1 > /tmp/myid--sub--1.report.txt
head -n 10 /tmp/myid--sub--1.report.txt

sleep 5

print; print -- "$fg[green]Unloading $fg[red]::\`myid/sub/1'::$fg[green] (agkozak/agkozak-zsh-theme)$reset_color"
zplugin unload myid/sub/1 > /tmp/myid--sub--1.unload.txt
head -n 10 /tmp/myid--sub--1.unload.txt

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`theme'< $fg[magenta]sindresorhus$reset_color/$fg[yellow]pure$fg_bold[green] AS ::\`$fg[red]my/pure$fg_bold[green]'::$reset_color"
zplugin ice multisrc"{async,pure}.zsh" pick"/dev/null" id-as"my/pure"; zplugin load sindresorhus/pure
zplugin cd my/pure; ls -lthd .*(N) *(N)

sleep 5

print
print -- $fg_bold[red]SNIPPETS START NOW$reset_color

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`OMZ plugin (svn)'< $fg[magenta]OMZ::plugins$reset_color/$fg[yellow]pip$fg_bold[red] without$fg_no_bold[red] id-as nickname$reset_color"
zplugin ice svn; zplugin snippet OMZ::plugins/pip
zplugin cd OMZ::plugins/pip; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`single-file command-snippet' $fg[magenta]GH::Osse/git-scripts/blob/master/git-unique$fg_bold[green] AS ::\`$fg[red]MY-UNIQUE$fg_bold[green]'::$reset_color"
zplugin ice as"program" id-as"MY-UNIQUE"; zplugin snippet https://github.com/Osse/git-scripts/blob/master/git-unique
zplugin cd MY-UNIQUE; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`OMZ plugin (svn)'< $fg[magenta]OMZ::plugins$reset_color/$fg[yellow]git$fg_bold[green] AS ::\`$fg[red]my$fg_bold[green]'::$reset_color"
zplugin ice svn id-as"my"; zplugin snippet OMZ::plugins/git
zplugin cd my; ls -lthd .*(N) *(N)

sleep 5

print; print -- "$fg[green]----------\nInstalling $fg[red]>\`OMZ plugin (svn)'< $fg[magenta]OMZ::plugins$reset_color/$fg[yellow]gradle$fg_bold[green] AS ::\`$fg[red]myid/sub$fg_bold[green]'::$reset_color"
zplugin ice svn id-as"myid/sub"; zplugin snippet OMZ::plugins/gradle
zplugin cd myid/sub; ls -lthd .*(N) *(N)

cd $OLDPWD
# vim:ft=zsh:sts=4:sw=4:et
